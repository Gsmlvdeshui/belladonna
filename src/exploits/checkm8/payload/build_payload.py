import struct

PAYLOAD_OFFSET_ARMV7 = 384

shellcode = open("checkm8_armv7.bin", 'r').read()
handler = struct.pack("<2I", 0xFEEDFACE, 0xCAFEBABE) + open("usb_0xA1_2_armv7.bin", 'r').read()[8:]
open("payload.dfu", 'w').write(shellcode + '\x00' * (PAYLOAD_OFFSET_ARMV7 - len(shellcode)) + handler)